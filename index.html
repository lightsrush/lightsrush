<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lights Rush</title>
    <script type="module" src="components/lr-header.js"></script>
    <script type="module" src="components/lr-footer.js"></script>
    <script type="module" src="components/lr-poster.js"></script>
    <link href="common.css" rel="stylesheet">
    <link href="index.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

    
    

    <div id="player">
        <lr-header></lr-header>
        <video playsinline autoplay muted loop> <!-- poster="" -->
            <source src="videos/last-party.webm" type="video/webm">
            <source src="videos/last-party.mp4" type="video/mp4">
        </video>
        <div id="title">Last Party</div>
    </div>

    <div id="controls">
        <div class="pill" id="filter">
            <div class="filter-choice selected" id="filter-all" onclick="filter(Filter.All)">All</div>
            <div class="filter-choice" id="filter-short" onclick="filter(Filter.Short)">Shorts</div>
            <div class="filter-choice" id="filter-feature" onclick="filter(Filter.Feature)">Features</div>
        </div>
    </div>

    <div id="posters">

        
            <lr-poster
                    title="Last Party"
                    cover="last-party"
                    year="2024"
                    duration="feature"
                    link="&#x2F;productions&#x2F;last-party&#x2F;"
            ></lr-poster>
        
            <lr-poster
                    title="13_OCT_1985_ARCHIVE"
                    cover="13-oct-1985-archive"
                    year="2023"
                    duration="short"
                    link="&#x2F;productions&#x2F;13-oct-1985-archive&#x2F;"
            ></lr-poster>
        
            <lr-poster
                    title="Sideror"
                    cover="sideror"
                    year="2021"
                    duration="short"
                    link="&#x2F;productions&#x2F;sideror&#x2F;"
            ></lr-poster>
        
            <lr-poster
                    title="Mont Blanc"
                    cover="mont-blanc"
                    year="2021"
                    duration="short"
                    link="&#x2F;productions&#x2F;mont-blanc&#x2F;"
            ></lr-poster>
        
            <lr-poster
                    title="Inside My Mind"
                    cover="inside-my-mind"
                    year="2020"
                    duration="short"
                    link="&#x2F;productions&#x2F;inside-my-mind&#x2F;"
            ></lr-poster>
        
            <lr-poster
                    title="Dream Circles"
                    cover="dream-circles"
                    year="2020"
                    duration="short"
                    link="&#x2F;productions&#x2F;dream-circles&#x2F;"
            ></lr-poster>
        
            <lr-poster
                    title="My Own Life"
                    cover="my-own-life"
                    year="2019"
                    duration="short"
                    link="&#x2F;productions&#x2F;my-own-life&#x2F;"
            ></lr-poster>
        
    </div>

    <lr-footer></lr-footer>

</body>

<script>
    const Filter = {
        All: 'All',
        Short: 'short',
        Feature: 'feature',
    };

    function filter(f) {
        document.querySelectorAll('.filter-choice').forEach(choice => {
            choice.classList.remove("selected");
            if (
                f === Filter.All && choice.id === "filter-all"
                || f === Filter.Short && choice.id === "filter-short"
                || f === Filter.Feature && choice.id === "filter-feature"
            ) { choice.classList.add("selected"); }

            document.querySelectorAll("lr-poster").forEach(poster => {
                if (
                    f === Filter.All
                    || poster.getAttribute("duration") === Filter.Short && f === Filter.Short
                    || poster.getAttribute("duration") === Filter.Feature && f === Filter.Feature
                ) {
                    poster.style.display = "block";
                } else {
                    poster.style.display = "none";
                }
            })
        });
    }

    window.addEventListener(`scroll`, function () {
        const scroll = this.scrollY;
        const style = document.querySelector(':root').style;
        const value = Math.min(scroll / 500, 0.65)
        style.setProperty("--header-alpha", value.toString());
    });
</script>
</html>
